# LMS (Learning Management System)

Система управления обучением с интеграцией платежей Stripe и JWT аутентификацией.

## Возможности

- **Управление курсами и уроками**
- **Система подписок на обновления курсов**
- **Интеграция с Stripe для обработки платежей**
- **JWT аутентификация**
- **REST API с документацией**
- **Фильтрация и пагинация**
- **Валидация YouTube ссылок**


## Модели данных

### Пользователи (CustomUser)
- Стандартная модель пользователя Django с расширенными полями
- Группы: модераторы, обычные пользователи

### Курсы (Course)
- Название, описание, превью, видео-ссылка
- Владелец (создатель курса)
- Подписки пользователей

### Уроки (Lesson)
- Принадлежность к курсу
- Название, описание, видео-ссылка
- Владелец (создатель урока)

### Подписки (CourseSubscription)
- Связь пользователь-курс
- Автоматическая установка владельца

### Платежи (Payment)
- Интеграция с Stripe
- Поддержка оплаты курсов и уроков
- История транзакций

## Права доступа

### Роли:
- **Анонимные пользователи:** Только просмотр публичных данных
- **Авторизованные пользователи:** 
  - Создание курсов/уроков
  - Подписка на курсы
  - Оплата контента
- **Владельцы контента:** Полный доступ к своим курсам/урокам
- **Модераторы:** 
  - Просмотр и редактирование всех курсов
  - Запрещено создание и удаление

### Пермишены:
- `IsAuthenticated` - базовая аутентификация
- `IsOwner` - доступ только владельцу
- `IsModerator` - права модератора
- Комбинации через операторы `|` (ИЛИ) и `&` (И)

## API Endpoints

### Аутентификация

POST /api/token/ - Получение JWT токена
POST /api/token/refresh/ - Обновление токена

### Пользователи

GET /users/ - Список пользователей
POST /users/create/ - Создание пользователя
PUT /users/update/{id}/ - Обновление пользователя

### Курсы

GET /courses/ - Список курсов (с пагинацией)
POST /courses/ - Создание курса (только авторизованные)
GET /courses/{id}/ - Детали курса
PUT /courses/{id}/ - Обновление курса (владелец/модератор)
PATCH /courses/{id}/ - Частичное обновление
DELETE /courses/{id}/ - Удаление (только владелец)

### Уроки

GET /lessons/ - Список уроков
POST /lessons/ - Создание урока
GET /lessons/{id}/ - Детали урока
PUT /lessons/{id}/ - Обновление урока
DELETE /lessons/{id}/ - Удаление урока

### Платежи

GET /payments/ - История платежей (фильтрация по курсу/уроку)
POST /payments/ - Создание платежной сессии Stripe


### Установка зависимостей
```bash
    poetry install
```

### Документация API
После запуска сервера:

Swagger UI: http://localhost:8000/api/docs/

ReDoc: http://localhost:8000/api/schema/redoc/

